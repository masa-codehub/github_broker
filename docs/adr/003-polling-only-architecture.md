# ADR 003: ポーリング方式アーキテクチャへの完全移行

## Status

Accepted

## Context

ユーザーからの戦略的指示に基づき、プロジェクトのアーキテクチャをWebhookベースから、GitHub APIを定期的に確認する「ポーリング方式」に完全に切り替えることが決定されました。この決定は、ローカルでの開発体験を簡素化し、外部に公開するエンドポイントを持つことの複雑さを排除することを目的としています。これにより、セットアップが容易になり、セキュリティリスクも低減されます。

## Decision

今後、本プロジェクトにおけるタスク取得のメカニズムは、GitHub APIへのポーリング方式を唯一の公式な方法とします。Webhookに関連するすべての技術（APIエンドポイント、サービス、設定など）は廃止され、新規開発やリファクタリングにおいて使用を禁止します。

## Consequences

この決定により、以下の影響が発生します。

- **`WebhookService` の廃止:** `github_broker/application/webhook_service.py` および関連するインターフェース（`api.py`内のエンドポイントなど）は、今後のリファクタリング作業で完全に削除されます。
- **`TaskService` の責務変更:** `TaskService` は、定期的なポーリング処理の起点となり、GitHub APIからIssueを取得する責務を担うように変更されます。
- **`docs/architecture/webhook-based-architecture.md` の廃止:** このアーキテクチャドキュメントは現状と一致しなくなるため、**廃止 (Deprecated)** されます。今後のアーキテクチャに関する参照は、このADRおよび将来作成されるポーリング方式の設計ドキュメントを参照してください。
- **設定ファイルの変更:** Webhookに関連する環境変数（`GITHUB_WEBHOOK_SECRET`など）は不要となります。
