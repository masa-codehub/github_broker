# 概要
ADR 007: Issue起票プロセスの品質保証自動化

## 状況

## Status

Accepted

## Context

現在、本プロジェクトにおけるGitHub Issueの品質は、起票者の知識や裁量に大きく依存しています。これにより、以下のような課題が発生しています。

1.  **品質のばらつき:** Issueのフォーマットが統一されておらず、開発に着手するために必要な情報（背景、目的、完了条件など）が不足しているケースが散見されます。
2.  **手動レビューの負荷:** 情報の不足やフォーマットの不備をレビュワーが手動で確認・指摘する必要があり、コミュニケーションコストが発生しています。これは、より本質的なレビューに割くべき時間を奪い、開発サイクルの遅延に繋がります。
3.  **単純なミスの発生:** 複数のIssue間で作業ブランチ名が重複するなど、手動チェックでは見逃しやすい単純なミスが後工程でのコンフリクトや手戻りの原因となるリスクがあります。

これらの課題は、開発プロセスの効率性と透明性を損なうボトルネックとなっています。

## 決定

これらの課題を解決するため、**「GitHub Issue Forms」**と**「GitHub Actions」**を組み合わせた、Issue起票プロセスの品質保証を自動化する仕組みを導入します。

1.  **入力の構造化 (Issue Forms):**
    *   Issue作成時のテンプレートとして、固定のテキストエリアではなく、多様な入力形式（テキスト、ドロップダウン、チェックボックス等）を提供できる`Issue Forms`（`.yml`形式）を全面的に採用します。
    *   フォームには、`背景 (Background)`、`目的 (Goal)`、`完了条件 (Acceptance Criteria)`、`ブランチ名 (Branch Name)`といったセクションを必須項目 (`required: true`) として定義し、情報の入力を強制します。

2.  **自動検証 (GitHub Actions):**
    *   Issueが作成 (`opened`) または編集 (`edited`) された際にトリガーされるGitHub Actionsワークフローを構築します。
    *   このワークフローは、Issueのボディをパースし、以下のルールに基づいた自動検証を実行します。
        *   **必須項目のチェック:** Issue Formで定義された必須項目が正しく入力されているかを確認します。
        *   **Issue間での情報重複チェック:** リポジトリ内の他のオープンなIssueと比較し、「作業ブランチ名」などの一意であるべき情報が重複していないかをGitHub API経由で検証します。
    *   検証の結果、ルール違反が検知された場合、ワークフローは以下のフィードバックを自動的に行います。
        *   違反内容を指摘するコメントを該当Issueに投稿する（例: `@<actor> ブランチ名が他のIssueと重複しています。`）。
        *   問題の種類に応じたラベル（例: `needs-more-info`, `branch-conflict`）を自動で付与する。

この2段階のアプローチにより、Issue作成の段階から品質を機械的に担保し、開発プロセス全体の円滑化を図ります。

## 結果

## Consequences

### メリット

*   **品質の標準化:** Issueの品質が起票者に依存しなくなり、開発に必要な情報が常に構造化された形で提供されます。
*   **生産性の向上:** レビュワーがIssueの形式をチェックする手間から解放され、より本質的な議論や設計のレビューに集中できます。
*   **手戻りの削減:** ブランチ名の重複といった単純なミスを未然に防ぎ、開発プロセスの手戻りを削減します。
*   **迅速なフィードバック:** ルール違反があれば即座に自動でフィードバックが行われるため、Issue起票から開発着手までのリードタイムが短縮されます。

### デメリットと考慮事項

*   **メンテナンスコスト:** 検証ロジックが複雑化した場合、GitHub Actionsのワークフロー自体のメンテナンスコストが発生します。
*   **ルールの厳格さ:** 過度に厳格なルールは、Issue起票の心理的ハードルを上げる可能性があります。ルールの導入にあたっては、必須項目を最小限に留めるなど、利便性とのバランスを考慮する必要があります。

### 影響範囲

*   **リポジトリ設定:** `.github/ISSUE_TEMPLATE/` および `.github/workflows/` ディレクトリに、本決定に基づく新しい設定ファイルが追加・管理されます。
*   **開発ワークフロー:** リポジトリでIssueを作成・編集するすべてのユーザーが、この新しいプロセスに従うことになります。

## Implementation Status (実装状況)

完了