# 概要 / Summary
[ADR-011] すべてのブランチへのPull RequestでCIをトリガーする

## 状況 / Context

## Status

- **Date**: 2025-10-19

## Context (背景)

現在のCIワークフロー (`.github/workflows/ci.yml`) は、`main`ブランチに対するPull Requestが作成された場合にのみトリガーされるように設定されています。この設定では、開発中のフィーチャーブランチや、`main`以外のブランチへの変更に対する品質保証が、CIプロセスによって自動的に行われません。

これにより、以下のような問題が発生する可能性があります。

-   `main`ブランチへのマージ直前まで、リントエラー、テストの失敗、その他の品質問題が発見されない。
-   開発者がローカル環境で `pre-commit` フックを実行し忘れた場合、品質の低いコードがリポジトリにプッシュされてしまう。
-   Pull Requestのレビュープロセスにおいて、自動化されたチェックによるフィードバックが得られないため、レビュアーの負担が増加する。

品質の高いソフトウェアを継続的に提供するためには、すべての変更に対して、開発の早い段階で一貫した品質ゲートを設けることが不可欠です。

## 決定 / Decision

`.github/workflows/ci.yml` ファイル内の `on.pull_request` トリガーから `branches` フィルタを削除します。

変更前:
```yaml
on:
  pull_request:
    branches:
      - main
```

変更後:
```yaml
on:
  pull_request:
```

これにより、どのブランチをターゲットにしたPull Requestであっても、CIワークフローが実行されるようになります。

## 結果 / Consequences

## Consequences (結果)

### メリット (Positive consequences)

-   **品質の早期確保:** すべてのPull Requestで自動的にテストとリントが実行されるため、開発サイクルの早い段階で問題を検知・修正できます。
-   **開発者体験の向上:** 開発者は、Pull Requestを作成するとすぐにCIからのフィードバックを得られるようになり、手動での確認作業が減少します。
-   **`main`ブランチの安定性向上:** `main`ブランチにマージされるコードは、常にCIチェックをパスしていることが保証され、ブランチの健全性が高まります。
-   **レビュー効率の向上:** レビュアーは、基本的なコード品質の問題ではなく、ロジックや設計のレビューに集中できます。

### デメリット (Negative consequences)

-   **CIリソースの消費増加:** CIの実行回数が増えるため、GitHub Actionsの実行時間やコストが増加する可能性があります。しかし、これは品質向上のための妥当なトレードオフと判断します。

## Verification Criteria (検証基準)

この意思決定が正しく実装されたことは、以下の方法で確認できます。

-   `main`以外のブランチ（例: `feature/some-new-feature`）から、別のブランチ（`main`でなくてもよい）へのPull Requestを作成した際に、GitHub上でCIワークフローが自動的に開始されること。

## Implementation Status (実装状況)
未着手
