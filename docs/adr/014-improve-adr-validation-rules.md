# 概要 / Summary
[ADR-014] ADR（アーキテクチャ決定記録）の検証規約の改善

- **Status**: 提案中
- **Date**: 2025-10-23

## 状況 / Context

現在のドキュメント検証スクリプト (`scripts/validate_docs.py`) は、ADRファイルに4つの基本的なセクション（概要, 状況, 決定, 結果）が存在することのみをチェックしています。

しかし、実際の運用において、ADRの品質と実用性を担保するためには、これだけでは不十分であることが判明しました。例えば、その決定が「いつ」「どのような状態（承認済みか、提案中か）」にあるのか、そして「決定が正しく実装されたことをどう確認するのか」といった、追跡可能性と検証可能性に関する情報が欠落しています。

これにより、形骸化したADRが生まれるリスクや、後から決定の背景や実装状況を追うのが困難になるという課題があります。

## 決定 / Decision

ADRの品質、追跡可能性、検証可能性を向上させるため、ドキュメント検証スクリプト (`scripts/validate_docs.py`) がチェックする必須項目を以下の通り拡張します。

**新しい必須セクションリスト:**

1.  `# 概要 / Summary`
2.  `- **Status**:`
3.  `- **Date**:`
4.  `## 状況 / Context`
5.  `## 決定 / Decision`
6.  `## 結果 / Consequences`
7.  `## Verification Criteria (検証基準)`
8.  `## Implementation Status (実装状況)`

検証スクリプトは、ADRファイル (`docs/adr/*.md`) 内に、上記8つの文字列が**完全に一致する形で**含まれていることを保証するように修正されます。

## 結果 / Consequences

### メリット (Positive consequences)

- **ADRの品質向上:** すべてのADRに状態、日付、検証基準が含まれることが保証され、ドキュメントの完全性と実用性が大幅に向上します。
- **追跡可能性の向上:** `Status`と`Implementation Status`により、各決定が現在どのようなフェーズにあるのかを誰でも簡単に追跡できます。
- **検証可能性の担保:** `Verification Criteria`を必須とすることで、「どのようにテストするか」が明確になり、決定が正しく実装される蓋然性が高まります。
- **規約の明確化:** ADRに記述すべき内容が明確に定義され、作成者の迷いを減らします。

### デメリット (Negative consequences)

- **ドキュメント作成の厳格化:** ADR作成時の手間がわずかに増加しますが、これは品質向上のための健全なトレードオフです。

## Verification Criteria (検証基準)

この意思決定が正しく実装されたことは、以下の方法で確認できます。

- 新しい検証規約に準拠していないADRファイル（例: `## Verification Criteria (検証基準)` が欠けているファイル）をコミットしようとすると、`pre-commit`フックがエラーを出力して失敗すること。
- 新しい検証規約の必須セクションをすべて満たしたADRファイルは、コミットが成功すること。
- 変更後の検証スクリプト (`scripts/validate_docs.py`) を直接実行した場合も、同様の検証が正しく機能すること。

## Implementation Status (実装状況)
未着手
