# Epic #713 ユーザー受け入れテスト作業要領

## 1. テストの目的

このテストは、プロンプト生成ロジックをサーバーサイドに移行した新アーキテクチャ（Epic #713）が、以下の価値を提供できているかを確認することを目的とします。

-   **価値1: エージェント開発の簡素化:** ワーカーエージェント（クライアント）は、プロンプトの内容を意識することなく、タスクの実行に集中できるか。
-   **価値2: 動作の安定性:** サーバーから提供されるプロンプトによって、エージェントが安定して期待通りのタスクを実行できるか。

## 2. テストの前提条件

-   Dockerおよびdocker-composeが利用可能な環境であること。
-   GitHubリポジトリのクローンと、`.env`ファイルに必要なトークンが設定済みであること。
-   `docker-compose up --build` コマンドにより、`server`コンテナと`redis`コンテナが正常に起動していること。
-   テスト実行前に、GitHubリポジトリがクリーンな状態であることを確認してください（未コミットの変更がないこと）。

## 3. テストシナリオ

### シナリオ1: シンプルなファイル作成タスクの実行

**目的:** エージェントがサーバーからの指示（プロンプト）に従い、指定された内容で新しいファイルを作成できることを確認する。

**手順:**

1.  **テスト用Issueの準備:**
    -   GitHub上で、以下の内容で新しいIssueを作成します。
        -   **タイトル:** `【UAT】新規ファイル作成テスト`
        -   **本文:**
            ```
            ## 目的
            サーバーサイドプロンプトのテストのため、指定された内容でファイルを作成します。

            ## 成果物 (Deliverables)
            - `research/uat-test.txt`
            ```
        -   **ラベル:** `BACKENDCODER`, `task`

2.  **ワーカーエージェントの実行:**
    -   ターミナルで、プロジェクトのルートディレクトリに移動し、`docker-compose run --rm worker-python` を実行します。

3.  **結果の確認:**
    -   実行ログにエラーがないことを確認します。
    -   ローカルのプロジェクトルートに `research/uat-test.txt` が作成され、その内容がIssueの指示通りであることを確認します。
    -   GitHub上のテスト用Issueに `in-progress` ラベルが付与され、その後 `closed` ラベルが付与されていることを確認します。

### シナリオ2: 既存ファイルの内容変更タスクの実行

**目的:** エージェントがサーバーからの指示（プロンプト）に従い、既存のファイルの内容を正確に変更できることを確認する。

**手順:**

1.  **テスト用ファイルの準備:**
    -   ローカルのプロジェクトルートに `research/existing-file.txt` という名前で新しいファイルを作成し、以下の内容を記述します。
        ```
        This is the original content.
        Line to be changed.
        This is another line.
        ```

2.  **テスト用Issueの準備:**
    -   GitHub上で、以下の内容で新しいIssueを作成します。
        -   **タイトル:** `【UAT】既存ファイル内容変更テスト`
        -   **本文:**
            ```
            ## 目的
            サーバーサイドプロンプトのテストのため、既存ファイルの内容を変更します。

            ## 変更内容
            - ファイル: `research/existing-file.txt`
            - 変更前: `Line to be changed.`
            - 変更後: `This line has been successfully modified.`

            ## 成果物 (Deliverables)
            - `research/existing-file.txt` の内容が変更されていること。
            ```
        -   **ラベル:** `BACKENDCODER`, `task`

3.  **ワーカーエージェントの実行:**
    -   ターミナルで、プロジェクトのルートディレクトリに移動し、`docker-compose run --rm worker-python` を実行します。

4.  **結果の確認:**
    -   実行ログにエラーがないことを確認します。
    -   ローカルの `research/existing-file.txt` の内容が以下のように変更されていることを確認します。
        ```
        This is the original content.
        This line has been successfully modified.
        This is another line.
        ```
    -   GitHub上のテスト用Issueに `in-progress` ラベルが付与され、その後 `closed` ラベルが付与されていることを確認します。

## 4. フィードバック方法

テスト中に問題が発生した場合、または改善点がある場合は、以下の方法でフィードバックをお願いします。

-   **GitHub Issue:** 新しいIssueを作成し、以下の情報を含めてください。
    -   **タイトル:** `【UATフィードバック】[問題の概要]`
    -   **本文:**
        -   発生したシナリオ番号
        -   具体的な手順
        -   期待される結果と実際の結果
        -   エラーログやスクリーンショット（もしあれば）
        -   提案される改善点
    -   **ラベル:** `bug`, `feedback`, `epic713-uat`
-   **Slack:** 関連するチャンネルで、Issueへのリンクとともに簡単な概要を共有してください。

皆様のご協力をお願いいたします。
